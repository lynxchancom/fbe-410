<div class="content">
<h2><div class="newssub">Вещание под GNU/Linux</div><div class="permalink">&nbsp;</div></h2>
Рассмотрим организацию вещания под Linux на примере программы IDJC (Internet DJ Console).<br>
Программа распространяется под лицензией GPL, написана на языках Python, C, C++.

<br>
В зависимости от дистрибутива, команда для установки может отличаться. Для Debian-based-дистрибутивов потребуется выполнить

<br># apt-get update &amp;&amp; apt-get install jack2 idjc qjackctl
<br>Для Arch Linux и производных:
<br># pacman -Syu jack2 qjackctl
<br># yaourt -S idjc
<br>
Эти команды установят клиент вещания, звуковой сервер jack2 и клиент jackd — QJackCtl.


<br>
<br>
Прежде чем запускать idjc, запустите qjackctl и с его помощью запустите jack.
<br>


<i>Примечание: настоятельно рекомендуется в окне параметров поставить чекбокс
«Режим реального времени» — это снизит вероятность возникновения
задержек (xrun) в работе звукового сервера</i><br><br>
После запуска окно должно выглядеть примерно так:<br>
<a href="/_images/qjackctl_running.png" target="_blank"><img src="/_images/qjackctl_running.png" alt=""></a>

<br><br>
Итак, сервер запущен, и если счётчик под надписью «Запущен» на нуле — можно запускать IDJC.

<br><br>
После запуска мы видим главное окно программы: две деки с плейлистами и элементами управления,
между ними общий для обиих дек ползунок громкости, панель управления потоком и кроссфейдингом, а также кнопки управления
микрофоном и индикаторы сигнала для микрофонов и потока.
<br>

<a href="/_images/idjc_running.png" target="_blank"><img src="/_images/idjc_running.png" alt=""></a>

<br><br>

Интерфейс достаточно интуитивен, но некоторые моменты требуют пояснения.<br>
Monitor mix — определяет, что слышит в наушниках диджей:

<ul><li>DJ — музыку с дек, на которых нажаты кнопки «DJ», необработанное аудио;
</li>
<li>Stream — окончательный обработанный поток, музыку с дек, на которых 
нажаты кнопки «Stream», свой голос, а также фоновый трек (о них позже).
Присутствует некоторая задержка.</li>
</ul>

Две пары кнопок с заголовком «Audio feed»:

<ul>
<li>DJ — разрешает звуку с соответствующей деки идти в наушники диджея;</li>
<li>Stream — разрешает звуку с соответствующей деки идти в поток на сервер.</li>
</ul>


Настройки для сервера Радио 410 должны выглядеть следующим образом:<br>
<a href="/_images/idjc_settings.png" target="_blank"><img src="/_images/idjc_settings.png" alt="" width="640" height="480"></a>
<br><br>
Для того, чтобы начать вещать, достаточно нажать в окне настроек кнопку со ссылкой <b>http://410chan.ru:8000/radio.ogg</b>.
 Рекомендуется также выставить чекбоксы «Start player» и «Start 
recorder» для автоматического включения первого трека указанной деки и 
канала записи соответственно.
Поле «Metadata» лучше не трогать, если не знаете, что это такое.
<br>
Настройки микрофона выбираются индивидуально, но главное — фильтровать 
низкие частоты и не увлекаться предусилением и компрессией, слишком 
громкий голос крайне раздражает уши.
<br>
<i>Послесловие<br><br>
IDJC отличается хорошей документированностью, которая, правда, реализована не лучшим путём:
почти каждый элемент интерфейса имеет подробный хинт о своём предназначении и поведении, написанный на понятном английском.<br>
Но разумеется не стоит увлекаться экспериментами на маунте <b>/radio.ogg</b>, так как именно на него
автоматически перенаправляются все слушатели с /mpd.ogg. Вместо этого лучше временно указать в
настройках <b>/test.ogg</b> и вещать на него. А можно вообще обойтись без вещания, запуская только запись.
<br>Маленький совет от Тордендаля: поглядывайте на счётчик XRUN'ов в qjackctl, если он за минуту
прибавляет больше 15-20, есть повод задуматься, что мешает бесперебойной работе jack2. Иногда
такое бывает из-за запущенного Skype, но иногда причина в банальной слабости ЭВМ.
</i>

<h2><div class="newssub">Skype и IDJC</div><div class="permalink">&nbsp;</div></h2>
Для того, чтобы вести эфиры со Skype™, вам потребуется, собственно, Skype™ и IDJC.<br>
Прежде чем начинать думать об организации такого вещания, настоятельно 
рекомендую удалить пакет pulseaudio, так как убийство его процесса 
далеко не всегда приносит желаемый результат.
В большинстве случаев pulseaudio можно удалить, не обращая внимания на 
зависимости (пример в Arch Linux:
sudo pacman -Rdd pulseaduio — эта команда удалит только pulseaudio, 
однако не тронет всё, что от него зависит).<br><br>
Для начала, завершите все приложения, использующие звук в данный момент, в т.ч. IDJC и jack.
Далее вам следует создать файл ~/.asoundrc_bak и поместить в него <a href="http://thordendal.dyndns.org/man/asound" target="_blank">сей текст</a>.
Затем настройки qjackctl требуется привести к виду, показанному на скриншоте:<br>
<a href="/_images/asoundrc.png" target="_blank"><img src="/_images/asoundrc.png"></a><br><br>
Разумеется, имя домашней директории следует заменить на правильное.<br>
Теперь следует запустить jack с помощью qjackctl, затем idjc и Skype™.<br>
Настройки Skype™ приводим к следующему виду:<br>
<a href="/_images/skype.png" target="_blank"><img src="/_images/skype.png" alt="" width="836" height="491"><br><br></a>
Разумеется, после проведения эфира, следует вернуть настройки в изначальное значение, иначе Skype™
не сможет найти указанные аудиоустройства.<br>
Для того, чтобы получить звук из Skype™ в канал диджея, нажмите кнопку с изображением
красного телефона, предварительно отключив в IDJC микрофон и переключившись на мониторинг
канала DJ. Под главным регулятором громкости появится ещё один — он регулирует громкость дек в
миксе диджея. В момент, когда нажата кнопка с красным телефоном, голоса диджея и его собеседника
не попадают в поток.<br>
Для того, чтобы отправить аудио-поток из Skype™ в эфир, нажмите кнопку с изображением зелёного телефона.
В этот момент также рекомендуется мониторить диджейский микс, чтобы не сбиваться из-за собственного голоса.<br>
<i>Примечание: отключив трансляцию разговора в Skype™, не забудьте отключить микрофон в IDJC!</i>

</div>
